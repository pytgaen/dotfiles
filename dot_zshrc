# Path to your Oh My Zsh installation.
export ZSH="$HOME/.oh-my-zsh"

# Theme configuration
ZSH_THEME="robbyrussell"

# Update behavior
zstyle ':omz:update' mode reminder  # just remind me to update when it's time
zstyle ':omz:update' frequency 14

# Plugins configuration (delegate to zinit or sheldon)
# plugins=(
#     git 
#     # z 
#     # zsh-autosuggestions 
#     # zsh-syntax-highlighting 
#     docker 
#     # docker-compose
#     fzf
# )

source $ZSH/oh-my-zsh.sh

# History Configuration
HISTSIZE=10000
SAVEHIST=10000
HISTFILE=~/.zsh_history

setopt histignorealldups    # Ignore duplicates in history
setopt sharehistory         # Share history between sessions
setopt extended_history     # Record timestamp of command in HISTFILE
setopt inc_append_history   # Add commands to HISTFILE in order of execution
setopt hist_expire_dups_first # Delete duplicates first when HISTFILE size exceeds HISTSIZE

# Keybindings
bindkey -e                  # Use emacs keybindings
bindkey '^R' history-incremental-pattern-search-backward

# Completion configuration
autoload -U compinit && compinit
zstyle ':completion:*' menu select

# Optimize copy/paste
zle_highlight+=(paste:none)

# Environment variables
export BROWSER="wslview"
export DISPLAY="x"
export EDITOR='nvim'        # Uncomment if you use neovim
export VISUAL="$EDITOR"

# Aliases
alias cb="snap run clipboard"
alias ll="lsd -lah"
alias zshconfig="$EDITOR ~/.zshrc"
alias reload="source ~/.zshrc"
alias update="sudo apt update && sudo apt upgrade"

alias load_dotenv="eval \"\$(shdotenv)\""
alias load_dotenv_over="eval \"\$(shdotenv --overload)\""
alias ze='zellij'
alias cb="snap run clipboard"

# ~/.zshrc or ~/.bashrc

eval "$(sheldon source)"

# Tools initialization
# Mise (version manager)
[[ -f ~/.local/bin/mise ]] && eval "$(~/.local/bin/mise activate zsh)"

# Task completion
eval "$(task --completion zsh)"

# FZF configuration
export FZF_DEFAULT_OPTS="--height 40% --layout=reverse --border"

# Theme (Oh My Posh)
eval "$(oh-my-posh init zsh --config /home/gaetan/.cache/oh-my-posh/themes/powerlevel10k_rainbow.omp.json)"

# eval "$(zoxide init zsh)"
eval "$(uv generate-shell-completion zsh)"
# eval "$(pkgx --shell-completion zsh)"

source /home/gaetan/.config/broot/launcher/bash/br

# Local customizations - if you want to add machine-specific configurations
[[ -f ~/.zshrc.local ]] && source ~/.zshrc.local
